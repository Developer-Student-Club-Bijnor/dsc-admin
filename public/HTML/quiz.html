<strong>
    <h2 style="font-family:fantasy">Quiz</h2></strong>
<hr color=red height=20px/>
<div id="spinner" class="text-primary " role="status" style="margin-left:45%;width: 3rem; height: 3rem;">
    <span class="sr-only">Loading...</span>
</div>
<h3>Add Questions</h3>
<br>



<div class="row">

    <div class="col-lg-5" style="margin-left:5%;margin-top:10%">
        <label for="quiz-name">Category</label>
        <input list="quiz" class="form-control " id="quiz-name" />
        <div class="invalid-feedback">
            Please choose a category
        </div>
        <datalist id="quiz">
                        <option value="C">
                        <option value="Android">
                        <option value="iOS">
                        <option value="NodeJs">
                        <option value="React">
                        <option value="JQuery">
                        <option value="C++">
                        <option value="Java">
                        <option value="Python">
                        <option value="SQL">
                        <option value="Kotlin">
                        <option value="JavaScript">
                        <option value="HTML 5">
                        <option value="CSS 3">
                        <option value="Bootstrap">
                        <option value="Dart">
                        <option value="Objective C">
                        <option value="Swift">
                        <option value="Internet Of Things">
                        <option value="Machine Learning">
                        <option value="Cloud Computing">
                        <option value="Artificial Intelligence">
                        <option value="Ruby">
                        <option value="R">
                        <option value="PHP">
                        <option value="Haskell">
                        <option value="Unity">
                        <option value="C#">
                    </datalist>
    </div>
    <hr>
    <div class="col-lg-4">
        <form id="quiz">
            <div class="form-group">
                <label for="quiz-question">Question</label>
                <input type="text" class="form-control " id="quiz-question" />
                <div class="invalid-feedback">
                    Please enter a question
                </div>
            </div>
            <div class="form-group">
                <label for="quiz-a">Option A</label>
                <input type="text" class="form-control " id="quiz-a" />
                <div class="invalid-feedback">
                    Please enter option
                </div>
            </div>
            <div class="form-group">
                <label for="quiz-b">Option B</label>
                <input type="text" class="form-control " id="quiz-b" />
                <div class="invalid-feedback">
                    Please enter option
                </div>
            </div>
            <div class="form-group">
                <label for="quiz-c">Option C</label>
                <input type="text" class="form-control " id="quiz-c" />
                <div class="invalid-feedback">
                    Please enter option
                </div>
            </div>
            <div class="form-group">
                <label for="quiz-d">Option D</label>
                <input type="text" class="form-control " id="quiz-d" />
                <div class="invalid-feedback">
                    Please enter option
                </div>
            </div>
            <div class="form-group">
                <label for="quiz-correct">Correct Answer</label>
                <input type="text" class="form-control " id="quiz-correct" />
                <div class="invalid-feedback">
                    Please enter correct option
                </div>
            </div>
            <div class="form-group">
                <button id="quiz-upload" type="button " class="btn btn-primary ">Add Question</button>
            </div>
            <div id="result-quiz">
                <h6></h6>
            </div>

        </form>

    </div>
    <hr><br>
    <br>
    <div class="col-lg-12">
        <h3>Question Bank</h3>
        <br>
        <label for="res-text">Technology/Language</label>
        <input list="technology " class="form-control " id="res-text" />
        <datalist id="technology ">
            <option value="C ">
        </datalist>
        <br>
        <button type=" button ">Export Excel</button>
        <br>
        <br>
        <table class="table table-striped">
            <thead>
                <tr>
                    <td>Question</td>

                    <td>Option A</td>
                    <td>
                        Option B</td>
                    <td>Option C</td>
                    <td>Option D</td>
                    <td>Correct Answer</td>
                    <td>Remove
                    </td>
                    <td>Edit
                    </td>
                </tr>

            </thead>

            <tbody></tbody>


        </table>

    </div>
</div>

<script>
    $("#quiz-name").addClass("is-invalid");
    var value = document.getElementById("quiz-name");
    var tech = "";
    value.addEventListener("input", function() {
        tech = this.value;
        if (!tech) {
            $("#quiz-name").addClass("is-invalid");
            return;
        } else {
            $("#quiz-name").removeClass("is-invalid");
            var technology = tech.toLowerCase().replace(" ", "").replace("#", "sharp").replace("++", "plusplus");

            $("#quiz-upload").click(function() {

                $("#quiz-question").removeClass("is-invalid");
                $("#quiz-a").removeClass("is-invalid");
                $("#quiz-b").removeClass("is-invalid");
                $("quiz-c").removeClass("is-invalid");
                $("#quiz-d").removeClass("is-invalid");
                $("#quiz-correct").removeClass("is-invalid");




                var question = $("#quiz-question").val();
                var a = $("#quiz-a").val();
                var b = $("#quiz-b").val();
                var c = $("#quiz-c").val();
                var d = $("#quiz-d").val();
                var correct = $("#quiz-correct").val();
                if (!question) {
                    $("quiz-question").addClass("is-invalid");
                    return;
                }
                if (!a) {
                    $("quiz-a").addClass("is-invalid");
                    return;
                }
                if (!b) {
                    $("quiz-b").addClass("is-invalid");
                    return;
                }
                if (!c) {
                    $("quiz-c").addClass("is-invalid");
                    return;
                }
                if (!d) {
                    $("quiz-d").addClass("is-invalid");
                    return;
                }
                if (!correct) {
                    $("quiz-correct").addClass("is-invalid");
                    return;
                }


                $("#spinner").addClass("spinner-grow")
                var quizData = {
                    "question": question,
                    "option1": a,
                    "option2": b,
                    "option3": c,
                    "option4": d,
                    "correct_answer": correct


                };

                var data = firebase.database().ref("QuizData/QA/" + technology);
                data.push().set(quizData, function(err) {
                    if (err) {
                        $("#result-quiz").attr("class", "alert alert-danger");
                        $("#result-quiz").html(err.message);

                    } else {
                        $("#result-quiz").attr("class", "alert alert-success");
                        $("#result-quiz").html("Question Added Successfully");


                    }

                    $("#spinner").removeClass("spinner-grow")
                    $("#quiz")[0].reset();

                })




            })
        }
    });
</script>