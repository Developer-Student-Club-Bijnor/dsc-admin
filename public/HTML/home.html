<strong>
        <h2 style="font-family:fantasy">HOME</h2></strong>
<hr color=red height=20px/>
<div id="spinner" class="text-primary spinner-grow" role="status" style="margin-left:45%;width: 3rem; height: 3rem;">
    <span class="sr-only">Loading...</span>
</div>
<div class="row">
    <div class="col-lg-5">
        <form id="form-news">
            <div class="form-group">
                <h3> <label for="news">News</label></h3>
                <input type="text" class="form-control" id="news-text" />
                <div class="invalid-feedback">
                    Please enter a valid news
                </div>
            </div>
            <div class="form-group">
                <button id="news-upload" type="button" class="btn btn-primary">Publish News</button>
            </div>
            <div id="result-news">
                <h6></h6>
            </div>
        </form>
    </div>

    <hr>
    <div class="col-lg-5">
        <h3>Result</h3>
        <form id="form-result">
            <div class="form-group">
                <label for="result-title">Title</label>
                <input type="text" class="form-control" id="result-title" />
                <div class="invalid-feedback">
                    Please enter a valid title
                </div>
            </div>
            <div class="form-group">
                <label for="result-file">File</label>
                <input type="file" class="form-control" id="result-file" />
                <div class="invalid-feedback">
                    Please choose a valid file
                </div>
            </div>
            <div class="form-group">
                <div class="progress">
                    <div id="result-progress" class="progress-bar" style="width:0%">0%</div>
                </div>
            </div>
            <div class="form-group">
                <button id="result-upload" type="button" class="btn btn-primary">Publish Result</button>
            </div>
            <div id="result-result">
                <h6></h6>
            </div>

        </form>
    </div>
    <hr>

    <div class="col-lg-5">
        <h3>Banner</h3>
        <form id="form-banner">
            <div class="form-group">
                <label for="banner-title">Banner Number</label>
                <input placeholder="1-7" type="text" class="form-control" id="banner-title" />
                <div class="invalid-feedback">
                    Please enter a valid banner no.
                </div>
            </div>
            <div class="form-group">
                <label for="banner-file">File</label>
                <input type="file" class="form-control" id="banner-file" />
                <div class="invalid-feedback">
                    Please choose a valid file
                </div>
            </div>
            <div class="form-group">
                <div class="progress">
                    <div id="banner-progress" class="progress-bar" style="width:0%">0%</div>
                </div>
            </div>
            <div class="form-group">
                <button id="banner-upload" type="button" class="btn btn-primary">Publish Banner</button>
            </div>
            <div id="result-banner">
                <h6></h6>
            </div>

        </form>
    </div>
    <hr>
    <div class="col-lg-5">
        <h2>Post</h2>
        <form id="form-post">
            <div class="form-group">
                <label for="post-title">Title</label>
                <input type="text" class="form-control" id="post-title" />
                <div class="invalid-feedback">
                    Please enter a valid title
                </div>
            </div>
            <div class="form-group">
                <label for="post-desc">Description</label>
                <input type="text" class="form-control" id="post-desc" />
                <div class="invalid-feedback">
                    Please enter a valid description
                </div>
            </div>
            <div class="form-group">
                <label for="post-pic">Picture</label>
                <input type="file" class="form-control" id="post-pic" />
                <div class="invalid-feedback">
                    Please choose a valid image
                </div>
            </div>
            <div class="form-group">
                <div class="progress">
                    <div id="post-progress" class="progress-bar" style="width:0%">0%</div>
                </div>
            </div>
            <div class="form-group">
                <button id="post-upload" type="button" class="btn btn-primary">Publish Post</button>
            </div>
            <div id="result-post">
                <h6></h6>
            </div>

        </form>
    </div>
    <hr>
    <div class="col-lg-5">
        <table class="table table-striped">
            <thead>
                <tr>

                    <th>Complain/Suggestion</th>
                </tr>

            </thead>
            <tbody id="complain">

            </tbody>
        </table>
    </div>
    <hr>
    <div class="col-lg-5">
        <table class="table table-striped">
            <thead>
                <tr>

                    <th>Feedback</th>
                </tr>

            </thead>
            <tbody id="feedback">

            </tbody>
        </table>
    </div>
    <hr>
</div>

<script>
    $("#news-upload").click(function() {
        $("#news-text").removeClass("is-invalid");



        var news = $("#news-text").val();
        if (!news) {
            $("#news-text").addClass("is-invalid");
            return;
        }

        $("#spinner").addClass("spinner-grow");


        var data = firebase.database().ref("MainData/mText");
        data.set(news, function(err) {
            if (err) {
                $("#result-news").attr("class", "alert alert-danger");
                $("#result-news").html(err.message);

            } else {
                $("#result-news").attr("class", "alert alert-success");
                $("#result-news").html("News Updated Successfully");


            }
            $("#spinner").removeClass("spinner-grow")
            $("#form-news")[0].reset();

        })




    })


    $("#banner-upload").click(function() {
        var validFile = ["image/jpeg ", "image/jpg", "image/png"];


        $("#banner-title").removeClass("is-invalid");
        $("#banner-file").removeClass("is-invalid");

        var banner_no = $("#banner-title").val();
        var file = $("#banner-file").prop("files")[0];

        if (!banner_no || banner_no > 7) {
            $("#banner-title").addClass("is-invalid");
            return;
        }

        if (file == null) {
            $("#banner-file").addClass("is-invalid");
            return;
        }

        if ($.inArray(file["type"], validFile) < 0) {
            $("#banner-file").addClass("is-invalid");
            return;
        }
        $("#spinner").addClass("spinner-grow")

        var database = firebase.database().ref("Switcher/");

        var name = file["name"];
        var extension = name.substring(name.lastIndexOf("."), name.length);

        var storage = firebase.storage().ref("ImageSwitcherPhotos" + "/" + banner_no + extension);
        var uploadTask = storage.put(file);

        uploadTask.on("state_changed",
            function progress(snapshot) {

                var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                $("#banner-progress").html(percentage + "%");
                $("#banner-progress").attr("style", "width:" + percentage + "%");


            },
            function error(err) {

            },

            function complete() {


                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {
                    var resultData = {
                        "imageUrl": downloadURL
                    };

                    if (banner_no == 1) {
                        database.child("switchdsc1").set(resultData, function(err) {
                            if (err) {
                                $("#result-banner").attr("class", "alert alert-danger");
                                $("#result-banner").html(err.message);

                            } else {
                                $("#result-banner").attr("class", "alert alert-success");
                                $("#result-banner").html("Banner Uploaded Successfully");


                            }
                        });
                    }
                    if (banner_no == 2) {
                        database.child("switchdsc2").set(resultData, function(err) {
                            if (err) {
                                $("#result-banner").attr("class", "alert alert-danger");
                                $("#result-banner").html(err.message);

                            } else {
                                $("#result-banner").attr("class", "alert alert-success");
                                $("#result-banner").html("Banner Uploaded Successfully");


                            }
                        });
                    }
                    if (banner_no == 3) {
                        database.child("switchdsc3").set(resultData, function(err) {
                            if (err) {
                                $("#result-banner").attr("class", "alert alert-danger");
                                $("#result-banner").html(err.message);

                            } else {
                                $("#result-banner").attr("class", "alert alert-success");
                                $("#result-banner").html("Banner Uploaded Successfully");


                            }
                        });
                    }

                    if (banner_no == 4) {
                        database.child("switchdsc4").set(resultData, function(err) {
                            if (err) {
                                $("#result-banner").attr("class", "alert alert-danger");
                                $("#result-banner").html(err.message);

                            } else {
                                $("#result-banner").attr("class", "alert alert-success");
                                $("#result-banner").html("Banner Uploaded Successfully");


                            }
                        });
                    }
                    if (banner_no == 5) {
                        database.child("switchdsc5").set(resultData, function(err) {
                            if (err) {
                                $("#result-banner").attr("class", "alert alert-danger");
                                $("#result-banner").html(err.message);

                            } else {
                                $("#result-banner").attr("class", "alert alert-success");
                                $("#result-banner").html("Banner Uploaded Successfully");


                            }
                        });
                    }
                    if (banner_no == 6) {
                        database.child("switchdsc6").set(resultData, function(err) {
                            if (err) {
                                $("#result-banner").attr("class", "alert alert-danger");
                                $("#result-banner").html(err.message);

                            } else {
                                $("#result-banner").attr("class", "alert alert-success");
                                $("#result-banner").html("Banner Uploaded Successfully");


                            }
                        });
                    }
                    if (banner_no == 7) {
                        database.child("switchdsc7").set(resultData, function(err) {
                            if (err) {
                                $("#result-banner").attr("class", "alert alert-danger");
                                $("#result-banner").html(err.message);

                            } else {
                                $("#result-banner").attr("class", "alert alert-success");
                                $("#result-banner").html("Banner Uploaded Successfully");


                            }
                        });
                    }
                    $("#spinner").removeClass("spinner-grow")
                    $("#form-banner")[0].reset();
                    $("#banner-progress").html("Completed");


                });
            })
    })
    $("#result-upload").click(function() {

        var validType = ["application/pdf"];

        $("#result-title").removeClass("is-invalid");
        $("#result-file").removeClass("is-invalid");

        var title = $("#result-title").val();
        var file = $("#result-file").prop("files")[0];

        if (!title) {
            $("#result-title").addClass("is-invalid");
            return;
        }

        if (file == null) {
            $("#result-file").addClass("is-invalid");
            return;
        }

        if ($.inArray(file["type"], validType) < 0) {
            $("#result-file").addClass("is-invalid");
            return;
        }

        $("#spinner").addClass("spinner-grow");

        var time = new Date().getTime();

        var database = firebase.database().ref("Results/" + time.toString());

        var name = file["name"];
        var extension = name.substring(name.lastIndexOf("."), name.length);

        var picName = new Date().getTime();

        var storage = firebase.storage().ref("Results" + "/" + picName + extension);
        var uploadTask = storage.put(file);

        uploadTask.on("state_changed",
            function progress(snapshot) {

                var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                $("#result-progress").html(percentage + "%");
                $("#result-progress").attr("style", "width:" + percentage + "%");


            },
            function error(err) {

            },

            function complete() {

                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {
                    var resultData = {
                        "name": title,
                        "link": downloadURL
                    }

                    database.set(resultData, function(err) {
                        if (err) {
                            $("#result-result").attr("class", "alert alert-danger");
                            $("#result-result").html(err.message);

                        } else {
                            $("#result-result").attr("class", "alert alert-success");
                            $("#result-result").html("Result Uploaded Successfully");


                        }
                        $("#spinner").removeClass("spinner-grow")
                        $("#form-result")[0].reset();
                        $("#result-progress").html("Completed");
                    });
                })
            })


    })



    $("#post-upload").click(function() {

        var validFormat = ["image/jpeg", "image/png", "image/jpg"];

        $("#post-title").removeClass("is-invalid");
        $("#post-desc").removeClass("is-invalid");
        $("#post-pic").removeClass("is-invalid");
        var title = $("#post-title").val();
        var file = $("#post-pic").prop("files")[0];
        var desc = $("#post-desc").val();

        if (!title) {
            $("#post-title").addClass("is-invalid");
            return;
        }
        if (!desc) {
            $("#post-desc").addClass("is-invalid");
            return;
        }
        if (file == null) {
            $("#post-pic").addClass("is-invalid");
            return;
        }
        if ($.inArray(file["type"], validFormat) < 0) {
            $("#post-pic").addClass("is-invalid");
            return;
        }

        $("#spinner").addClass("spinner-grow")

        var time = new Date().getTime();

        var database = firebase.database().ref("MainData/TechPosts/");

        var name = file["name"];
        var extension = name.substring(name.lastIndexOf("."), name.length);

        var picName = new Date().getTime();

        var storage = firebase.storage().ref("TechPost" + "/" + picName + extension);
        var uploadTask = storage.put(file);

        uploadTask.on("state_changed",
            function progress(snapshot) {

                var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                $("#post-progress").html(percentage + "%");
                $("#post-progress").attr("style", "width:" + percentage + "%");


            },
            function error(err) {

            },

            function complete() {

                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {

                    var postData = {
                        "tCaption": title,
                        "tComment": "0",
                        "tDescription": desc,
                        "tImg": downloadURL,
                        "tLike": "0",
                        "tShare": "0"
                    };

                    database.push().set(postData, function(err) {
                        if (err) {
                            $("#result-post").attr("class", "alert alert-danger");
                            $("#result-post").html(err.message);

                        } else {
                            $("#result-post").attr("class", "alert alert-success");
                            $("#result-post").html("Post Done Successfully");


                        }
                        $("#spinner").removeClass("spinner-grow")
                        $("#form-post")[0].reset();
                        $("#post-progress").html("Completed");
                    })

                });
            });
    })

    var dComp = firebase.database().ref("MainData/ComplainSuggestions");
    dComp.on("value", function(complains) {

        if (complains.exists()) {
            var complainHtml = "";

            complains.forEach(function(complain) {
                complainHtml += "<tr>";
                complainHtml += "<td>";
                complainHtml += complain.val().comment;
                complainHtml += "</td>";
                complainHtml += "</tr>";


            });
            $("#complain").html(complainHtml);
        }


    })

    var feed = firebase.database().ref("MainData/Feedback");
    feed.on("value", function(feedbacks) {

        if (feedbacks.exists()) {
            var feedbackHtml = "";

            feedbacks.forEach(function(feedback) {
                feedbackHtml += "<tr>";
                feedbackHtml += "<td>";
                feedbackHtml += feedback.val().comment;
                feedbackHtml += "</td>";
                feedbackHtml += "</tr>";


            });
            $("#spinner").removeClass("spinner-grow")
            $("#feedback").html(feedbackHtml);
        }


    })
</script>