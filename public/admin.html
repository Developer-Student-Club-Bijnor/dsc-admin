<!DOCTYPE html>
<html class="h-100">

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-storage.js"></script>
    <script type="text/javascript" src="JS/app.js">
    </script>
    <style>
        .chat-main {
            position: fixed;
            width: 270px;
            bottom: 0px;
            right: 200px;
        }
        
        .chat-header {
            background: #4267B2;
            padding-top: 1px;
            padding-bottom: 1px;
        }
        
        .username i {
            font-size: 9px;
        }
        
        .chats {
            height: 300px;
            overflow-x: scroll;
            overflow-x: hidden;
            background-color: white;
        }
        
        .chats ul li {
            list-style: none;
            clear: both;
            font-size: 13px;
        }
        
        .username h6 {
            display: inline-block;
            font-size: 12px;
            font-weight: 600;
        }
        
        .chats .send-msg {
            float: right;
        }
        
        .receive-msg img {
            border-radius: 100%;
            height: 30px;
            width: 12%;
        }
        
        .receive-msg-img {
            display: inline;
        }
        
        .receive-msg .receive-msg-desc {
            display: inline-block;
        }
        
        .receive-msg .receive-msg-desc p {
            background: #c1c1c1;
        }
        
        .message-box input {
            border: none;
            margin-right: 10%;
            background-color: white;
        }
        
        .message-box input:focus {
            outline: none;
        }
        
        .message-box {
            background-color: white;
        }
        
        .input-icons i {
            position: absolute;
        }
        
        .input-icons {
            width: 100%;
            margin-bottom: 10px;
        }
        
        .icon {
            padding: 10px;
            min-width: 40px;
        }
        
        .input-field {
            width: 100%;
            padding: 10px;
            text-align: center;
        }
    </style>

</head>


<body class="h-100" style="background-color: #343a40;">

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="position:-webkit-sticky">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Welcome Admin!</a>
            <div class="dropdown navbar-right">
                <button id="user-email" class="btn btn-secondary " type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Chat
                    </button>
                <div class="dropdown-menu" style="margin-top:8px;width:315px;height:540px;background:#343a40;" aria-labelledby="user-email">
                    <div class="search" style="float: left;margin: 7px;">
                        <form action="#">
                            <input style="width: 250px;height:25px;border-radius: 25px;border: none;" type="text" placeholder=" Search " name="search">
                            <button style="background-color: #343a40;color: #f2f2f2;float: right;margin-left:10px;margin-top:2px;padding: 2px 2px;margin-right: 16px;font-size: 12px;border: none;cursor: pointer;"> 
                                <i class="fa fa-search"
                                    style="font-size: 18px;"> 
                                </i> 
                            </button>
                        </form>
                    </div>
                    <div id="users" style="margin:4px, 4px; 
                    padding:4px; 
                    height: 100%; 
                    background-color:#343a40;
                    overflow-x: hidden; 
                    overflow-y: auto; 
                    text-align:justified;">

                    </div>
                </div>
            </div>
        </div>

        <div class="dropdown navbar-right">
            <button id="user-email" class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    admin@dscrecbijnor.com
                </button>
            <div class="dropdown-menu" aria-labelledby="user-email">
                <a class="dropdown-item" href="#">Logout</a>
            </div>
        </div>
    </nav>

    <div class="row h-100 bg-light">
        <div class="col-lg-2 bg-secondary bg-dark">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a id="nav-home-id" class="nav-link" href="#" onclick="switchView('HTML/home.html')">
                        <span>Home</span>
                    </a>
                </li>
                <li class=" nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/education.html')">
                        <span>e-Library</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/training.html')">
                        <span>Training</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/event.html')">
                        <span>Events</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/workshop.html')">
                        <span>Workshop</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/project.html')">
                        <span>Projects</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="#" onclick="switchView('HTML/quiz.html')">
                        <span>Quiz</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/spandan.html')">
                        <span>Tech Spandan</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/compete.html')">
                        <span>Competitions</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/donate.html')">
                        <span>Donate For Code</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/leader.html')">
                        <span>Show Leader Board</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/about.html')">
                        <span>About DSC</span>
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link " href="# " onclick="switchView('HTML/privacy.html')">
                        <span>Privacy Policy</span>
                    </a>
                </li>
            </ul>
        </div>

        <div class="container " id="container" style="background-color:rgb(240, 240, 240)">
            <strong>
                <h2 style="font-family:fantasy">HOME</h2></strong>
            <hr color=red height=20px/>
            <div id="spinner" class="text-primary spinner-grow" role="status" style="margin-left:45%;width: 3rem; height: 3rem;">
                <span class="sr-only">Loading...</span>
            </div>
            <div class="row">
                <div class="col-lg-5">
                    <form id="form-news">
                        <div class="form-group">
                            <h3> <label for="news">News</label></h3>
                            <input type="text" class="form-control" id="news-text" />
                            <div class="invalid-feedback">
                                Please enter a valid news
                            </div>
                        </div>
                        <div class="form-group">
                            <button id="news-upload" type="button" class="btn btn-primary">Publish News</button>
                        </div>
                        <div id="result-news">
                            <h6></h6>
                        </div>
                    </form>
                </div>

                <hr>
                <div class="col-lg-5">
                    <h3>Result</h3>
                    <form id="form-result">
                        <div class="form-group">
                            <label for="result-title">Title</label>
                            <input type="text" class="form-control" id="result-title" />
                            <div class="invalid-feedback">
                                Please enter a valid title
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="result-file">File</label>
                            <input type="file" class="form-control" id="result-file" />
                            <div class="invalid-feedback">
                                Please choose a valid file
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="progress">
                                <div id="result-progress" class="progress-bar" style="width:0%">0%</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <button id="result-upload" type="button" class="btn btn-primary">Publish Result</button>
                        </div>
                        <div id="result-result">
                            <h6></h6>
                        </div>

                    </form>
                </div>
                <hr>

                <div class="col-lg-5">
                    <h3>Banner</h3>
                    <form id="form-banner">
                        <div class="form-group">
                            <label for="banner-title">Banner Number</label>
                            <input placeholder="1-7" type="text" class="form-control" id="banner-title" />
                            <div class="invalid-feedback">
                                Please enter a valid banner no.
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="banner-file">File</label>
                            <input type="file" class="form-control" id="banner-file" />
                            <div class="invalid-feedback">
                                Please choose a valid file
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="progress">
                                <div id="banner-progress" class="progress-bar" style="width:0%">0%</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <button id="banner-upload" type="button" class="btn btn-primary">Publish Banner</button>
                        </div>
                        <div id="result-banner">
                            <h6></h6>
                        </div>

                    </form>
                </div>
                <hr>
                <div class="col-lg-5">
                    <h2>Post</h2>
                    <form id="form-post">
                        <div class="form-group">
                            <label for="post-title">Title</label>
                            <input type="text" class="form-control" id="post-title" />
                            <div class="invalid-feedback">
                                Please enter a valid title
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="post-desc">Description</label>
                            <input type="text" class="form-control" id="post-desc" />
                            <div class="invalid-feedback">
                                Please enter a valid description
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="post-pic">Picture</label>
                            <input type="file" class="form-control" id="post-pic" />
                            <div class="invalid-feedback">
                                Please choose a valid image
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="progress">
                                <div id="post-progress" class="progress-bar" style="width:0%">0%</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <button id="post-upload" type="button" class="btn btn-primary">Publish Post</button>
                        </div>
                        <div id="result-post">
                            <h6></h6>
                        </div>

                    </form>
                </div>
                <div class="container" id="chat-box" style="display: none;">
                    <div class="row pt-3">
                        <div class="chat-main">
                            <div class="col-md-12 chat-header rounded-top bg-primary text-white">
                                <div class="row">
                                    <div class="col-md-6 username pl-2" id="user-name">

                                    </div>
                                    <div class="col-md-6 options text-right pr-2">
                                        <i class="fa fa-times hide-chat-box" aria-hidden="true" id="user-close" onclick="close()"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-content">
                                <div class="col-md-12 chats border" id="user-chat">
                                    <ul class="p-0">

                                    </ul>
                                </div>
                                <div class="col-md-12 message-box border pl-2 pr-2 border-top-0 input-icons">
                                    <input type="text" id="userinput" class="pl-0 pr-0 w-100 input-field" placeholder="Type a message..." />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="col-lg-5">
                    <table class="table table-striped">
                        <thead>
                            <tr>

                                <th>Complain/Suggestion</th>
                            </tr>

                        </thead>
                        <tbody id="complain">

                        </tbody>
                    </table>
                </div>
                <hr>
                <div class="col-lg-5">
                    <table class="table table-striped">
                        <thead>
                            <tr>

                                <th>Feedback</th>
                            </tr>

                        </thead>
                        <tbody id="feedback">

                        </tbody>
                    </table>
                </div>
                <hr>
            </div>

            <script>
                $("#user-close").click(function() {
                    document.getElementById("chat-box").style.display = "none";
                })


                $("#news-upload").click(function() {
                    $("#news-text").removeClass("is-invalid");



                    var news = $("#news-text").val();
                    if (!news) {
                        $("#news-text").addClass("is-invalid");
                        return;
                    }

                    $("#spinner").addClass("spinner-grow");


                    var data = firebase.database().ref("MainData/mText");
                    data.set(news, function(err) {
                        if (err) {
                            $("#result-news").attr("class", "alert alert-danger");
                            $("#result-news").html(err.message);

                        } else {
                            $("#result-news").attr("class", "alert alert-success");
                            $("#result-news").html("News Updated Successfully");


                        }
                        $("#spinner").removeClass("spinner-grow")
                        $("#form-news")[0].reset();

                    })




                })


                $("#banner-upload").click(function() {
                    var validFile = ["image/jpeg ", "image/jpg", "image/png"];


                    $("#banner-title").removeClass("is-invalid");
                    $("#banner-file").removeClass("is-invalid");

                    var banner_no = $("#banner-title").val();
                    var file = $("#banner-file").prop("files")[0];

                    if (!banner_no || banner_no > 7) {
                        $("#banner-title").addClass("is-invalid");
                        return;
                    }

                    if (file == null) {
                        $("#banner-file").addClass("is-invalid");
                        return;
                    }

                    if ($.inArray(file["type"], validFile) < 0) {
                        $("#banner-file").addClass("is-invalid");
                        return;
                    }
                    $("#spinner").addClass("spinner-grow")

                    var database = firebase.database().ref("Switcher/");

                    var name = file["name"];
                    var extension = name.substring(name.lastIndexOf("."), name.length);

                    var storage = firebase.storage().ref("ImageSwitcherPhotos" + "/" + banner_no + extension);
                    var uploadTask = storage.put(file);

                    uploadTask.on("state_changed",
                        function progress(snapshot) {

                            var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                            $("#banner-progress").html(percentage + "%");
                            $("#banner-progress").attr("style", "width:" + percentage + "%");


                        },
                        function error(err) {

                        },

                        function complete() {


                            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {
                                var resultData = {
                                    "imageUrl": downloadURL
                                };

                                if (banner_no == 1) {
                                    database.child("switchdsc1").set(resultData, function(err) {
                                        if (err) {
                                            $("#result-banner").attr("class", "alert alert-danger");
                                            $("#result-banner").html(err.message);

                                        } else {
                                            $("#result-banner").attr("class", "alert alert-success");
                                            $("#result-banner").html("Banner Uploaded Successfully");


                                        }
                                    });
                                }
                                if (banner_no == 2) {
                                    database.child("switchdsc2").set(resultData, function(err) {
                                        if (err) {
                                            $("#result-banner").attr("class", "alert alert-danger");
                                            $("#result-banner").html(err.message);

                                        } else {
                                            $("#result-banner").attr("class", "alert alert-success");
                                            $("#result-banner").html("Banner Uploaded Successfully");


                                        }
                                    });
                                }
                                if (banner_no == 3) {
                                    database.child("switchdsc3").set(resultData, function(err) {
                                        if (err) {
                                            $("#result-banner").attr("class", "alert alert-danger");
                                            $("#result-banner").html(err.message);

                                        } else {
                                            $("#result-banner").attr("class", "alert alert-success");
                                            $("#result-banner").html("Banner Uploaded Successfully");


                                        }
                                    });
                                }

                                if (banner_no == 4) {
                                    database.child("switchdsc4").set(resultData, function(err) {
                                        if (err) {
                                            $("#result-banner").attr("class", "alert alert-danger");
                                            $("#result-banner").html(err.message);

                                        } else {
                                            $("#result-banner").attr("class", "alert alert-success");
                                            $("#result-banner").html("Banner Uploaded Successfully");


                                        }
                                    });
                                }
                                if (banner_no == 5) {
                                    database.child("switchdsc5").set(resultData, function(err) {
                                        if (err) {
                                            $("#result-banner").attr("class", "alert alert-danger");
                                            $("#result-banner").html(err.message);

                                        } else {
                                            $("#result-banner").attr("class", "alert alert-success");
                                            $("#result-banner").html("Banner Uploaded Successfully");


                                        }
                                    });
                                }
                                if (banner_no == 6) {
                                    database.child("switchdsc6").set(resultData, function(err) {
                                        if (err) {
                                            $("#result-banner").attr("class", "alert alert-danger");
                                            $("#result-banner").html(err.message);

                                        } else {
                                            $("#result-banner").attr("class", "alert alert-success");
                                            $("#result-banner").html("Banner Uploaded Successfully");


                                        }
                                    });
                                }
                                if (banner_no == 7) {
                                    database.child("switchdsc7").set(resultData, function(err) {
                                        if (err) {
                                            $("#result-banner").attr("class", "alert alert-danger");
                                            $("#result-banner").html(err.message);

                                        } else {
                                            $("#result-banner").attr("class", "alert alert-success");
                                            $("#result-banner").html("Banner Uploaded Successfully");


                                        }
                                    });
                                }
                                $("#spinner").removeClass("spinner-grow")
                                $("#form-banner")[0].reset();
                                $("#banner-progress").html("Completed");


                            });
                        })
                })
                $("#result-upload").click(function() {

                    var validType = ["application/pdf"];

                    $("#result-title").removeClass("is-invalid");
                    $("#result-file").removeClass("is-invalid");

                    var title = $("#result-title").val();
                    var file = $("#result-file").prop("files")[0];

                    if (!title) {
                        $("#result-title").addClass("is-invalid");
                        return;
                    }

                    if (file == null) {
                        $("#result-file").addClass("is-invalid");
                        return;
                    }

                    if ($.inArray(file["type"], validType) < 0) {
                        $("#result-file").addClass("is-invalid");
                        return;
                    }

                    $("#spinner").addClass("spinner-grow");

                    var time = new Date().getTime();

                    var database = firebase.database().ref("Results/" + time.toString());

                    var name = file["name"];
                    var extension = name.substring(name.lastIndexOf("."), name.length);

                    var picName = new Date().getTime();

                    var storage = firebase.storage().ref("Results" + "/" + picName + extension);
                    var uploadTask = storage.put(file);

                    uploadTask.on("state_changed",
                        function progress(snapshot) {

                            var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                            $("#result-progress").html(percentage + "%");
                            $("#result-progress").attr("style", "width:" + percentage + "%");


                        },
                        function error(err) {

                        },

                        function complete() {

                            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {
                                var resultData = {
                                    "name": title,
                                    "link": downloadURL
                                }

                                database.set(resultData, function(err) {
                                    if (err) {
                                        $("#result-result").attr("class", "alert alert-danger");
                                        $("#result-result").html(err.message);

                                    } else {
                                        $("#result-result").attr("class", "alert alert-success");
                                        $("#result-result").html("Result Uploaded Successfully");


                                    }
                                    $("#spinner").removeClass("spinner-grow")
                                    $("#form-result")[0].reset();
                                    $("#result-progress").html("Completed");
                                });
                            })
                        })


                })



                $("#post-upload").click(function() {

                    var validFormat = ["image/jpeg", "image/png", "image/jpg"];

                    $("#post-title").removeClass("is-invalid");
                    $("#post-desc").removeClass("is-invalid");
                    $("#post-pic").removeClass("is-invalid");
                    var title = $("#post-title").val();
                    var file = $("#post-pic").prop("files")[0];
                    var desc = $("#post-desc").val();

                    if (!title) {
                        $("#post-title").addClass("is-invalid");
                        return;
                    }
                    if (!desc) {
                        $("#post-desc").addClass("is-invalid");
                        return;
                    }
                    if (file == null) {
                        $("#post-pic").addClass("is-invalid");
                        return;
                    }
                    if ($.inArray(file["type"], validFormat) < 0) {
                        $("#post-pic").addClass("is-invalid");
                        return;
                    }

                    $("#spinner").addClass("spinner-grow")

                    var time = new Date().getTime();

                    var database = firebase.database().ref("MainData/TechPosts/");

                    var name = file["name"];
                    var extension = name.substring(name.lastIndexOf("."), name.length);

                    var picName = new Date().getTime();

                    var storage = firebase.storage().ref("TechPost" + "/" + picName + extension);
                    var uploadTask = storage.put(file);

                    uploadTask.on("state_changed",
                        function progress(snapshot) {

                            var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                            $("#post-progress").html(percentage + "%");
                            $("#post-progress").attr("style", "width:" + percentage + "%");


                        },
                        function error(err) {

                        },

                        function complete() {

                            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {

                                var postData = {
                                    "tCaption": title,
                                    "tComment": "0",
                                    "tDescription": desc,
                                    "tImg": downloadURL,
                                    "tLike": "0",
                                    "tShare": "0"
                                };

                                database.push().set(postData, function(err) {
                                    if (err) {
                                        $("#result-post").attr("class", "alert alert-danger");
                                        $("#result-post").html(err.message);

                                    } else {
                                        $("#result-post").attr("class", "alert alert-success");
                                        $("#result-post").html("Post Done Successfully");


                                    }
                                    $("#spinner").removeClass("spinner-grow")
                                    $("#form-post")[0].reset();
                                    $("#post-progress").html("Completed");
                                })

                            });
                        });
                })

                var dComp = firebase.database().ref("MainData/ComplainSuggestions");
                dComp.on("value", function(complains) {

                    if (complains.exists()) {
                        var complainHtml = "";

                        complains.forEach(function(complain) {
                            complainHtml += "<tr>";
                            complainHtml += "<td>";
                            complainHtml += complain.val().comment;
                            complainHtml += "</td>";
                            complainHtml += "</tr>";


                        });
                        $("#complain").html(complainHtml);
                    }


                })

                var feed = firebase.database().ref("MainData/Feedback");
                feed.on("value", function(feedbacks) {

                    if (feedbacks.exists()) {
                        var feedbackHtml = "";

                        feedbacks.forEach(function(feedback) {
                            feedbackHtml += "<tr>";
                            feedbackHtml += "<td>";
                            feedbackHtml += feedback.val().comment;
                            feedbackHtml += "</td>";
                            feedbackHtml += "</tr>";


                        });
                        $("#spinner").removeClass("spinner-grow")
                        $("#feedback").html(feedbackHtml);
                    }


                })

                var userN = firebase.database().ref("Users/");
                userN.on("value", function(r) {

                    if (r.exists()) {
                        var resHtml = "";
                        r.forEach(function(re) {

                            var profile = "&#39" + re.val().profileImageUrl + "&#39";
                            var name = "&#39" + re.val().displayName + "&#39";
                            var user = "&#39" + re.key + "&#39";

                            resHtml += "<div onclick='openChat(" + profile + "," + name + "," + user + ")'>"
                            resHtml += "<img src='"

                            resHtml += re.val().profileImageUrl;

                            resHtml += "' id='image'  width=50px height=50px  style='border-radius:50%;margin-top:10px'/>"

                            resHtml += "<span style='margin-top:8px;margin-left:30px;color:white'>"
                            resHtml += re.val().displayName;
                            resHtml += "</span>"
                            resHtml += "</div>"

                        })
                        $("#users").html(resHtml);
                    }
                })

                function openChat(profile, name, user) {

                    var admin = "hG7x1c1oZ7VzqgHFtcvgyT5SO6y2";

                    document.getElementById("chat-box").style.display = "block";
                    var userName = "<h6 class='m-0'>" + name + "</h6>";
                    $("#user-name").html(userName);

                    var chatDB = firebase.database().ref("Chats/");
                    chatDB.on("value", function(gets) {
                        if (gets.exists()) {
                            var chatHtml = "";
                            chatHtml += "<ul class='p-0'>"
                            gets.forEach(function(get) {
                                var sender = get.val().sender;
                                var receiver = get.val().receiver;
                                var message = get.val().message;


                                if (sender == admin && receiver == user) {

                                    chatHtml += "<li class = 'pl-2 pr-2 bg-primary rounded text-white text-center send-msg mb-1'>";
                                    chatHtml += message;
                                    chatHtml += "</li>"

                                } else
                                if (sender == user && receiver == admin) {
                                    chatHtml += "<li class='p-1 rounded mb-1'> <div class ='receive-msg'><img src='";
                                    chatHtml += profile;
                                    chatHtml += "'/><div class ='receive-msg-desc text-center mt-1 ml-1 pl-2 pr-2'><p class ='pl-2 pr-2 rounded'>";
                                    chatHtml += message;
                                    chatHtml += "</p></div></div></li>";
                                }

                            })
                            chatHtml += "</ul>";
                            $("#user-chat").html(chatHtml);
                        }
                    })


                    userinput.addEventListener("keyup", function(event) {
                        if (event.keyCode == 13) {
                            var text = $("#userinput").val();
                            var data = {
                                "message": text,
                                "sender": admin,
                                "receiver": user
                            }

                            chatDB.push().set(data, function(err) {
                                if (err) {
                                    window.alert("Unable to send message due to " + err.message);
                                } else {
                                    $("#userinput").val('');
                                }

                            })
                        }

                    })
                }
            </script>

        </div>
    </div>
</body>

</html>